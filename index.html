<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
<title>Mind Garden</title>
<meta name="apple-mobile-web-app-capable" content="yes">

<style>
:root{
  --bg:#020617;--card:#0f172a;--muted:#94a3b8;
  --g1:#dcfce7;--g2:#86efac;--g3:#22c55e;--g4:#15803d;
  --today:#38bdf8;
}
*{box-sizing:border-box}
body{margin:0;font-family:-apple-system,system-ui;background:linear-gradient(180deg,#020617,#022c22);color:#fff;padding:env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left)}
header{text-align:center;padding:1rem}
main{max-width:560px;margin:auto;padding:1rem}
.card{background:rgba(15,23,42,.9);border-radius:18px;padding:1rem;margin-bottom:1rem}
.row{display:flex;gap:.5rem;align-items:center}
input,textarea,button{background:#020617;border:1px solid #1f2937;border-radius:12px;color:#fff;padding:.6rem;font-family:inherit}
button{cursor:pointer}
.habit{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #1f2937;padding:.4rem 0}
.check{width:24px;height:24px;border-radius:50%;border:2px solid #22c55e;display:flex;align-items:center;justify-content:center;cursor:pointer}
.check.done{background:#22c55e;color:#022c22;font-weight:bold}

/* Calendar */
.calendar-wrap{overflow-x:auto;-webkit-overflow-scrolling:touch;touch-action:pan-x pinch-zoom}
table{border-collapse:collapse;font-size:.7rem;width:max-content;min-width:100%}
th,td{padding:2px;min-width:18px;text-align:center}
th.sticky,td.sticky{position:sticky;left:0;background:#020617;z-index:2;text-align:left;padding-right:6px}
.heat{width:16px;height:16px;border-radius:4px;margin:auto}
.today{outline:2px solid var(--today);outline-offset:1px}

/* Garden */
.garden{display:grid;grid-template-columns:repeat(auto-fit,minmax(60px,1fr));gap:.5rem}
.plant{height:60px;border-radius:12px;background:#020617;border:1px solid #1f2937;display:flex;align-items:flex-end;justify-content:center;overflow:hidden}
.plant span{width:100%;display:block;background:linear-gradient(180deg,#86efac,#22c55e)}
.flower{font-size:1.4rem}
.small{font-size:.75rem;color:var(--muted)}
</style>
</head>
<body>
<header>
<h1>ðŸŒ± Mind Garden</h1>
<div class="small">Habits Â· Journal Â· Growth</div>
</header>
<main>

<div class="card row">
<input id="habitInput" placeholder="Add habit" style="flex:1">
<button onclick="addHabit()">+</button>
<input type="date" id="datePicker">
</div>

<div class="card" id="habitList"></div>

<div class="card">
<strong>Journal</strong>
<textarea id="journal" style="width:100%;height:90px;margin-top:.5rem" placeholder="Thoughts for this dayâ€¦"></textarea>
<button style="width:100%;margin-top:.5rem" onclick="saveJournal()">Save</button>
</div>

<div class="card">
<strong>Monthly View</strong>
<div id="monthLabel" class="small"></div>
<div id="monthly" class="calendar-wrap"></div>
</div>

<div class="card">
<strong>Garden</strong>
<div id="garden" class="garden"></div>
</div>

</main>

<script>
const dp=document.getElementById('datePicker');
dp.value=new Date().toISOString().slice(0,10);
let zoom=1;

const heatColor=p=>p===0?'#020617':p<.25?'var(--g1)':p<.5?'var(--g2)':p<.75?'var(--g3)':'var(--g4)';
const load=()=>JSON.parse(localStorage.getItem('habits')||'[]');
const save=h=>localStorage.setItem('habits',JSON.stringify(h));

function addHabit(){const i=document.getElementById('habitInput');if(!i.value.trim())return;const h=load();h.push({name:i.value,done:[]});save(h);i.value='';render();}
function toggle(i){const h=load();const d=dp.value;const a=h[i].done;const x=a.indexOf(d);x>=0?a.splice(x,1):a.push(d);save(h);render();}

function render(){
const h=load();const d=dp.value;
const hl=document.getElementById('habitList');hl.innerHTML='';
document.getElementById('journal').value=localStorage.getItem('j-'+d)||'';
h.forEach((x,i)=>{
const row=document.createElement('div');row.className='habit';
row.innerHTML=`<div>${x.name}</div><div class="check ${x.done.includes(d)?'done':''}" onclick="toggle(${i})">${x.done.includes(d)?'âœ“':''}</div>`;
hl.appendChild(row);
});
renderMonth();renderGarden();}

function saveJournal(){localStorage.setItem('j-'+dp.value,document.getElementById('journal').value)}

function renderMonth(){
const h=load();const c=document.getElementById('monthly');const l=document.getElementById('monthLabel');
const sel=new Date(dp.value);const y=sel.getFullYear(),m=sel.getMonth();
l.textContent=sel.toLocaleDateString(undefined,{month:'long',year:'numeric'});
const days=new Date(y,m+1,0).getDate();
const today=new Date().toISOString().slice(0,10);
let t='<table style="transform:scale('+zoom+');transform-origin:left top"><tr><th class="sticky">Habit</th>';
for(let d=1;d<=days;d++)t+=`<th>${d}</th>`;t+='</tr>';

h.forEach(x=>{
let count=0;t+=`<tr><td class="sticky">${x.name}</td>`;
for(let d=1;d<=days;d++){
const k=`${y}-${String(m+1).padStart(2,'0')}-${String(d).padStart(2,'0')}`;
const done=x.done.includes(k);if(done)count++;
const cls=(k===today)?'today':'';
t+=`<td><div class="heat ${cls}" onclick="jump('${k}')" style="background:${heatColor(done?1:0)}"></div></td>`;
}
t+='</tr>';
});
c.innerHTML=t+'</table>';
}

function jump(k){dp.value=k;render();}

function renderGarden(){
const g=document.getElementById('garden');g.innerHTML='';
load().forEach(x=>{
const p=Math.min(1,x.done.length/30);
const div=document.createElement('div');div.className='plant';
div.innerHTML=p>.7?'ðŸŒ¸':`<span style="height:${p*100}%"></span>`;
g.appendChild(div);
});}

// Swipe month-to-month
let startX=0;
document.getElementById('monthly').addEventListener('touchstart',e=>startX=e.touches[0].clientX);
document.getElementById('monthly').addEventListener('touchend',e=>{
const dx=e.changedTouches[0].clientX-startX;
if(Math.abs(dx)>60){const d=new Date(dp.value);d.setMonth(d.getMonth()+(dx<0?1:-1));dp.value=d.toISOString().slice(0,10);render();}}
);

// Pinch zoom
let lastDist=null;
document.getElementById('monthly').addEventListener('touchmove',e=>{
if(e.touches.length===2){
const dx=e.touches[0].clientX-e.touches[1].clientX;
const dy=e.touches[0].clientY-e.touches[1].clientY;
const dist=Math.hypot(dx,dy);
if(lastDist){zoom=Math.min(1.6,Math.max(0.7,zoom+(dist-lastDist)/300));renderMonth();}
lastDist=dist;}
});
document.getElementById('monthly').addEventListener('touchend',()=>lastDist=null);

dp.onchange=render;render();
</script>
</body>
</html>
l>
